# обработчик логов для Polog для взаимодействия с телеграм

Если вам в логгере [polog](https://github.com/pomponchik/polog) нехватает отправки сообщений на телефон, просто добавте этот обработчик

## Оглавление

- [**Быстрый старт**](#быстрый-старт)
- [**Настройки логгера**](#Настройки-логгера)
- [**Общие советы про логирование**](#общие-советы-про-логирование)


## Быстрый старт

Установите обработчик путём копирования файлов в директорию в которой установлен [polog](https://pypi.org/project/polog/):

Перед тем как создавать обработчик для телеграм, нужно создать бота, с помощью [BotFather](t.me/BotFather). Если у вас уже есть свой бот, вам необходимо узнать его токен.
Так же вам нужно знать chat_id чата, в который будут отсылаться логи. Это может быть как чат, так и конкретный человек  .
Это можно узнать только программно, с помощью бота, написав, обработчик сообщений, поступающих боту.
```python

import telebot

bot = telebot.TeleBot(token)

@bot.message_handler(content_types=['text'])
def handle_text(message):
    print(message.chat.id)

bot.polling(none_stop=False)
```

## Настройки логгера

после этого нужно написать что-нибудь вашему боту, и посмотреть какой id запишется на вывод скрипта

эту информацию (токен и id чата) необходимо сохранить в отдельных параметрах, и при создании обработчика передать их в параметры конструктора

Или как в следующем примере сохранить параметры в отдельном скрипте my_config.py и импортировать их, после чего создавать обработчик. 

```python
from polog.handlers.telegram.sender import TelegramSender
from polog import config
from my_config import MY_TOKEN, MY_CHAT

config.add_handlers(TelegramSender(MY_TOKEN, MY_CHAT))
```

после чего вы можете использовать этот обработчик в своих логах

```python
from polog import log
import time

def test_send_normal():
    log('hello')
    time.sleep(0.0001)
```


На этом введение закончено. Если вам интересны тонкости настройки логгера и его более мощные функции, можете почитать более подробную документацию в [README к polog](https://github.com/pomponchik/polog/blob/master/README.md).

## Общие советы про логирование

Чтобы получить наибольшую пользу от ведения логов, следуйте нескольким небольшим правилам для организации вашего проекта.

- не логгируйте в телеграм частовыполняемые функции. Таймаут для телеграм-ботов выставлен в одну секунде, и флуд сообщениями от кого бы то ни было никому не нравится. 
- Как следствие используйте этот обработчик для отправки важных сообщений или сообщений об ошибках, но контролируйте чтобы оно отправлялось единожды за событие.
-  Избегайте [излишнего экранирования ошибок](https://en.wikipedia.org/wiki/Error_hiding). Когда вы ловите исключения блоками try-except, в логирующие декораторы они могут не попасть. Поэтому полезно взять за правило каждое использование инструкции except сопровождать [ручным логированием](#ручное-логирование-через-log) образовавшегося исключения.
